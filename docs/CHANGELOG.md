# 📝 更新日志

本文档记录了 Video Hunter 项目的所有重要更改。

## [1.1.0] - 2025-06-18

### 🔧 架构优化
- **移除QinAV专用下载器**: 删除了有问题的 `qinav_downloader.go` 文件
- **统一下载器架构**: 所有网站都使用 yt-dlp 下载器，避免自定义解析的bug
- **简化Service层**: 移除了 `Service` 结构体中的 `qinav` 字段
- **优化代码逻辑**: 简化了 `GetVideoInfo` 和 `startDownload` 函数

### 🛡️ 稳定性提升
- **避免自定义解析**: 不再维护可能有bug的网站特定解析代码
- **统一错误处理**: 所有下载都通过 yt-dlp 处理，错误处理更一致
- **减少依赖**: 移除了对自定义HTTP客户端的依赖

### 📦 代码简化
- **减少代码复杂度**: 移除了复杂的网站特定逻辑
- **更易维护**: 代码结构更清晰，维护成本更低
- **统一接口**: 所有下载都使用相同的接口和流程

### 🚀 性能优化
- **减少资源占用**: 统一下载器架构，减少内存和CPU使用
- **更快的启动**: 减少了初始化时间
- **更好的并发**: 简化了并发处理逻辑

### 🎯 功能增强
- **更多网站支持**: yt-dlp 支持更多网站，功能更强大
- **更好的兼容性**: 与 yt-dlp 的更新保持同步
- **更稳定的下载**: 减少了因自定义解析导致的下载失败

### 📝 文档更新
- **更新README.md**: 添加了架构说明和v1.1.0更新内容
- **更新QUICK_START.md**: 反映了最新的项目状态
- **添加CHANGELOG.md**: 详细记录版本更新历史

## [1.0.0] - 2025-06-17

### ✨ 初始版本发布
- **现代化Web界面**: 使用Tailwind CSS的响应式设计
- **多平台支持**: 支持YouTube、Pinterest、Bilibili等主流视频平台
- **高性能下载**: 基于yt-dlp的高性能视频下载
- **实时进度监控**: WebSocket实时显示下载进度
- **灵活配置系统**: YAML配置文件，支持环境变量
- **Docker支持**: 提供Docker镜像和部署脚本

### 🌐 Web界面功能
- **响应式设计**: 支持桌面和移动设备
- **实时进度条**: 显示下载进度、速度、剩余时间
- **任务管理**: 支持查看、取消、清空下载任务
- **美观界面**: 现代化UI设计，用户体验友好

### ⚡ 技术特性
- **Go语言**: 高性能后端服务
- **Gin框架**: 轻量级Web框架
- **WebSocket**: 实时通信
- **yt-dlp**: 强大的视频下载引擎
- **SQLite**: 轻量级数据存储

### 🔧 配置系统
- **YAML配置**: 易于理解和修改的配置文件
- **环境变量**: 支持环境变量覆盖配置
- **多环境**: 支持开发、测试、生产环境配置

### 📊 监控和日志
- **结构化日志**: 使用logrus进行结构化日志记录
- **日志轮转**: 支持日志文件轮转和压缩
- **健康检查**: 提供健康检查接口

### 🐳 Docker支持
- **Dockerfile**: 提供官方Docker镜像
- **docker-compose**: 支持一键部署
- **多架构**: 支持多种CPU架构

## 2025-06-20

### 优化和修复
- 优化了代码结构，将utils.go中的功能整合到ytdlp_downloader.go
- 修复B站视频下载没有声音的问题，添加ffmpeg检测和提示
- 修复Pinterest视频下载问题，动态选择最佳格式
- 添加辅助脚本用于合并视频和音频文件
  - `scripts/merge_bilibili.sh`: 手动合并指定的视频和音频文件
  - `scripts/auto_merge.sh`: 自动查找并合并下载目录中的视频和音频文件

### 新增功能
- 添加用户友好提示，告知需要安装ffmpeg以获得带音频的视频
- 在没有ffmpeg的情况下，返回无声视频而不是失败
- 为Pinterest视频添加智能格式选择，自动选择最佳视频和音频格式

---

## 版本命名规则

我们使用 [语义化版本](https://semver.org/lang/zh-CN/) 进行版本命名：

- **主版本号**: 不兼容的API修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

## 贡献

如果你想为更新日志做出贡献，请：

1. 在提交代码时，在提交信息中描述你的更改
2. 对于重要的更改，请更新相应的文档
3. 遵循现有的格式和风格

---

**感谢所有为 Video Hunter 做出贡献的开发者！** 🎬✨ 